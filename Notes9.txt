This is the code in my emel_sprint10_canary branch